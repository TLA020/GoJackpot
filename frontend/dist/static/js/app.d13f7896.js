(function(t){function e(e){for(var n,i,s=e[0],c=e[1],l=e[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=a("ce5b"),o=a.n(r),i=(a("bf40"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{clipped:t.$vuetify.breakpoint.lgAndUp,app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[t._l(t.items,(function(e){return[e.heading?a("v-row",{key:e.heading,attrs:{align:"center"}},[a("v-col",{attrs:{cols:"6"}},[e.heading?a("v-subheader",[t._v(" "+t._s(e.heading)+" ")]):t._e()],1),a("v-col",{staticClass:"text-center",attrs:{cols:"6"}},[a("a",{staticClass:"body-2 black--text",attrs:{href:"#!"}},[t._v("EDIT")])])],1):e.children?a("v-list-group",{key:e.text,attrs:{"prepend-icon":e.model?e.icon:e["icon-alt"],"append-icon":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.text)+" ")])],1)]},proxy:!0}],null,!0),model:{value:e.model,callback:function(a){t.$set(e,"model",a)},expression:"item.model"}},t._l(e.children,(function(e,n){return a("v-list-item",{key:n,attrs:{to:e.url}},[t._v(" link > "),e.icon?a("v-list-item-action",[a("v-icon",[t._v(t._s(e.icon))])],1):t._e(),a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.text)+" ")])],1)],1)})),1):a("v-list-item",{key:e.text,attrs:{link:"",to:e.url}},[a("v-list-item-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.text)+" ")])],1)],1)]}))],2)],1),a("v-app-bar",{attrs:{"clipped-left":t.$vuetify.breakpoint.lgAndUp,app:"",color:"blue darken-3",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("v-toolbar-title",{staticClass:"ml-0 pl-4",staticStyle:{width:"300px"}},[a("span",{staticClass:"hidden-sm-and-down"},[t._v("Devtobs")])]),t.user?a("span",[t._v(" _ID: ("+t._s(t.user.ID)+") Email: "+t._s(t.user.email)+" ")]):t._e(),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-apps")])],1),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-bell")])],1),a("v-btn",{attrs:{icon:"",large:""}})],1),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1)],1)}),s=[],c={data:function(){return{dialog:!1,drawer:null,items:[{icon:"mdi-home",text:"Home",url:"/"},{icon:"mdi-cash-usd",text:"Jackpot",url:"/jackpot"},{icon:"mdi-cog",text:"Settings"},{icon:"mdi-help-circle",text:"Help"}],source:{}}},computed:{user:function(){return this.$store.state.$auth.user}}},l=c,u=a("2877"),d=a("6544"),m=a.n(d),p=a("7496"),f=a("40dc"),v=a("5bc1"),h=a("8336"),_=a("62ad"),b=a("a523"),E=a("132d"),g=a("8860"),S=a("56b0"),O=a("da13"),R=a("1800"),w=a("5d23"),T=a("f6c4"),k=a("f774"),y=a("0fd9"),V=a("2fa4"),x=a("e0c7"),C=a("2a7f"),A=Object(u["a"])(l,i,s,!1,null,null,null),$=A.exports;m()(A,{VApp:p["a"],VAppBar:f["a"],VAppBarNavIcon:v["a"],VBtn:h["a"],VCol:_["a"],VContainer:b["a"],VIcon:E["a"],VList:g["a"],VListGroup:S["a"],VListItem:O["a"],VListItemAction:R["a"],VListItemContent:w["a"],VListItemTitle:w["b"],VMain:T["a"],VNavigationDrawer:k["a"],VRow:y["a"],VSpacer:V["a"],VSubheader:x["a"],VToolbarTitle:C["a"]});a("45fc");var N=a("8c4f"),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Home")]),a("pre",[t._v("Welcome "+t._s(t.user.email))])])},U=[],j={name:"Home",data:function(){return{}},computed:{user:function(){return this.$store.state.$auth.user}},mounted:function(){this.$socketEvent("authorized",(function(){console.log("authorized from sokcethandler")}))}},I=j,P=Object(u["a"])(I,L,U,!1,null,"565bff72",null),D=P.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{light:"",color:"primary"}},[a("v-toolbar-title",[t._v("Login / Register")])],1),a("v-card-text",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{"prepend-icon":"mdi-account",name:"email",label:"Email",type:"email",rules:t.emailRules,required:"","data-cy":"signinEmailField"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{"prepend-icon":"mdi-lock-question",name:"password",label:"Password",type:"password","data-cy":"signinPasswordField",rules:t.passwordRules,required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",disabled:!t.valid,loading:t.loading,"data-cy":"signinSubmitBtn"},on:{click:function(e){return t.submit("register")}}},[t._v("Register")]),a("v-btn",{attrs:{color:"secondary",disabled:!t.valid,loading:t.loading,"data-cy":"signinSubmitBtn"},on:{click:function(e){return t.submit("login")}}},[t._v("Login")])],1)],1),a("div",[t.error?a("v-alert",{attrs:{dismissible:"",type:"error"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e()],1)],1)],1)],1)},G=[],M=a("5530"),q=a("2f62"),K={name:"Signin",computed:Object(M["a"])({},Object(q["b"])("$auth",["error","loading"])),data:function(){return{valid:!1,email:"",password:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail must be valid"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t.length>=6||"Password must be greater than 6 characters"}]}},methods:{submit:function(t){this.$refs.form.validate()&&this.$store.dispatch("$auth/".concat(t),{email:this.email,password:this.password})}}},J=K,H=a("0798"),F=a("b0af"),W=a("99d9"),z=a("0e8f"),Y=a("4bd4"),Q=a("a722"),X=a("8654"),Z=a("71d9"),tt=Object(u["a"])(J,B,G,!1,null,null,null),et=tt.exports;m()(tt,{VAlert:H["a"],VBtn:h["a"],VCard:F["a"],VCardActions:W["a"],VCardText:W["b"],VContainer:b["a"],VFlex:z["a"],VForm:Y["a"],VLayout:Q["a"],VSpacer:V["a"],VTextField:X["a"],VToolbar:Z["a"],VToolbarTitle:C["a"]});var at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Jackpot")]),a("div",{staticClass:"users"},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"500"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",{staticClass:"float-left"},[t._v("Users online")]),a("v-spacer")],1),a("v-list",{attrs:{subheader:""}},t._l(t.currentUsers,(function(e){return a("v-list-item",{key:e.Email,staticClass:"mt-1"},[a("v-list-item-avatar",[a("v-img",{attrs:{src:t.getAvatar(e.Email)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.Email)}})],1)],1)})),1),a("v-divider")],1)],1)])},nt=[],rt={name:"jackpot",methods:{placeBet:function(){this.$store.dispatch("sendSocket",{name:"place-bet",data:{amount:Math.floor(50*Math.random())+1}})},getAvatar:function(t){return"https://api.adorable.io/avatars/".concat(t)}},computed:{currentUsers:function(){return this.$store.state.$game.currentUsers}}},ot=rt,it=a("ce7e"),st=a("adda"),ct=a("8270"),lt=Object(u["a"])(ot,at,nt,!1,null,"5ede38c8",null),ut=lt.exports;m()(lt,{VCard:F["a"],VDivider:it["a"],VImg:st["a"],VList:g["a"],VListItem:O["a"],VListItemAvatar:ct["a"],VListItemContent:w["a"],VListItemTitle:w["b"],VSpacer:V["a"],VToolbar:Z["a"],VToolbarTitle:C["a"]});var dt={Authenticated:function(t){return t.authenticated}},mt={SET_USER:function(t,e){t.user=e},REMOVE_USER:function(t){t.user=null},SET_AUTHENTICATED:function(t,e){t.authenticated=e},SET_ERROR:function(t,e){t.error=e},SET_LOADING:function(t,e){t.loading=e}},pt={user:null,authenticated:!1,error:"",loading:!1},ft=(a("d3b7"),a("bc3a")),vt=a.n(ft),ht=(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_BASE_URL||"/api/v1")+"/accounts",_t={login:function(t,e){var a=t.commit,n=t.dispatch,r=e.email,o=e.password;a("SET_LOADING",!0),vt.a.post("".concat(ht,"/login"),{email:r,password:o}).then((function(t){var e=t.data;a("SET_USER",e),a("SET_ERROR",null),n("sendSocket",{event:"auth",data:e},{root:!0}),localStorage.setItem("user",JSON.stringify(e)),Vt.push("/")})).catch((function(t){a("SET_ERROR","Invalid credentials, try again"),console.log(t)})).finally((function(){a("SET_LOADING",!1)}))},register:function(t,e){var a=t.commit,n=t.dispatch,r=e.email,o=e.password;a("SET_LOADING",!0),vt.a.post("".concat(ht,"/register"),{email:r,password:o}).then((function(t){var e=t.data;a("SET_USER",e),a("SET_ERROR",null),n("sendSocket",{event:"auth",data:e},{root:!0}),localStorage.setItem("user",JSON.stringify(e)),Vt.push("/")})).catch((function(t){a("SET_ERROR","email already in use, consider another"),console.log(t)})).finally((function(){a("SET_LOADING",!1)}))}},bt={namespaced:!0,getters:dt,mutations:mt,state:pt,actions:_t},Et={},gt={SET_CURRENT_USERS:function(t,e){t.currentUsers=e}},St={currentUsers:[],inGame:[],lastWinner:{},currentWinner:{},currentGame:{},timeLeft:{}},Ot={doWhat:function(t){var e=t.commit;e("SET_LOADING",!0)}},Rt={namespaced:!0,getters:Et,mutations:gt,state:St,actions:Ot},wt=(a("4160"),a("159b"),{});n["default"].prototype.$socketEvent=function(t,e){wt[t]||(wt[t]=[]),wt[t].push(e)};var Tt=function(t){t.subscribe((function(e){if("SOCKET_ONMESSAGE"===e.type){var a=e.payload,n=a.event,r=a.data;switch(wt[n]&&wt[n].forEach((function(t){return t(r)})),n){case"current-users":t.commit("$game/SET_CURRENT_USERS",r.users),console.log("SET CURRENT PLAYERS");break;default:return}}}))};n["default"].use(q["a"]);var kt=new q["a"].Store({state:{socket:{isConnected:!1,message:{},reconnectError:!1}},mutations:{SOCKET_ONOPEN:function(t,e){n["default"].$socket=e.currentTarget,t.$auth.user.token&&n["default"].$socket.sendObj({event:"auth",data:t.$auth.user}),t.socket.isConnected=!0},SOCKET_ONCLOSE:function(t){t.socket.isConnected=!1},SOCKET_ONERROR:function(t,e){console.error(t,e)},SOCKET_ONMESSAGE:function(t,e){t.socket.message=e},SOCKET_RECONNECT:function(t,e){console.info(t,e)},SOCKET_RECONNECT_ERROR:function(t){t.socket.reconnectError=!0}},actions:{sendSocket:function(t,e){n["default"].$socket.sendObj(e)}},modules:{$auth:bt,$game:Rt},plugins:[Tt]});n["default"].use(N["a"]);var yt=new N["a"]({routes:[{path:"/",name:"Home",component:D,meta:{authRequired:!0}},{path:"/auth",name:"Auth",component:et,meta:{authRequired:!1}},{path:"/jackpot",name:"jackpot",component:ut,meta:{authRequired:!0}}]});yt.beforeEach((function(t,e,a){if(t.matched.some((function(t){return t.meta.authRequired})))if(kt.state.$auth.user)a();else{var n=JSON.parse(window.localStorage.getItem("user"));if(n)return kt.commit("$auth/SET_USER",n),a();a({path:"/auth"})}else a()}));var Vt=yt,xt=(a("99af"),a("caad"),a("2532"),a("b408")),Ct=a.n(xt),At={install:function(t){var e="";e=location.hostname.includes("localhost")?Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SOCKET_URL||"ws://".concat(location.hostname,":5001/ws"):Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SOCKET_URL||"wss://".concat(location.hostname,":").concat(location.port,"/ws"),t.use(Ct.a,"".concat(e),{store:kt,format:"json"})}};n["default"].config.productionTip=!1,n["default"].use(At),n["default"].use(o.a),n["default"].prototype.$store=kt,new n["default"]({render:function(t){return t($)},store:kt,router:Vt,vuetify:new o.a({theme:{dark:!1}})}).$mount("#app")}});
//# sourceMappingURL=app.d13f7896.js.map